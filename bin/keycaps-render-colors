#!/usr/bin/env python3
"""Render some selected colors to HTML in order to compare selections.
"""
__author__ = 'Martin Blais <blais@furius.ca>'

import argparse
import io
import logging
import sys

from keycaps import colors


TEMPLATE = '''
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>Colors</title>
    <style type="text/css">
      div {{ 
        height: 3em; 
        margin-top: 0.5em; 
        padding: 0.5em; 
        font-weight: bold;
        vertical-align: center;
      }}
{style}
    </style>
  </head>

  <body>
{body}
  </body>
</html>
'''

def main():
    parser = argparse.ArgumentParser(description=__doc__.strip())
    parser.add_argument('codes', nargs='+', help='A list of color codes')
    args = parser.parse_args()

    style = io.StringIO()
    body = io.StringIO()
    for code in args.codes:
        color = getattr(colors, code, None)
        if color is None:
            logging.warning("Color code '%s' could not be found", code)
            continue
        
        body.write('    <div class="{}">{}</div>\n'.format(code,code))
        style.write('      .{} {{ background-color: {}; }}\n'.format(code, color))

    sys.stdout.write(TEMPLATE.format(style=style.getvalue(),
                                     body=body.getvalue()))


if __name__ == '__main__':
    main()
